import React from 'react';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Label } from '@/components/ui/label';
import { Smartphone } from 'lucide-react';

const userAgents = [
  // iPhone Models
  { value: 'iphone_15_pro_safari', label: 'iPhone 15 Pro', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_15_safari', label: 'iPhone 15', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_14_pro_safari', label: 'iPhone 14 Pro', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_14_safari', label: 'iPhone 14', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_13_safari', label: 'iPhone 13', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_12_safari', label: 'iPhone 12', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_se_safari', label: 'iPhone SE', icon: 'ðŸ“±', device: 'Safari', group: 'iPhone' },
  { value: 'iphone_chrome', label: 'iPhone Chrome', icon: 'ðŸ“±', device: 'Chrome', group: 'iPhone' },
  // Samsung Models
  { value: 'samsung_s24_ultra', label: 'Galaxy S24 Ultra', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_s24', label: 'Galaxy S24', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_s23_ultra', label: 'Galaxy S23 Ultra', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_s23', label: 'Galaxy S23', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_a54', label: 'Galaxy A54', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_zfold5', label: 'Galaxy Z Fold 5', icon: 'ðŸ¤–', device: 'Chrome', group: 'Samsung' },
  { value: 'samsung_browser', label: 'Samsung Browser', icon: 'ðŸ¤–', device: 'Samsung Internet', group: 'Samsung' },
  // Google Pixel
  { value: 'pixel_8_pro', label: 'Pixel 8 Pro', icon: 'ðŸ¤–', device: 'Chrome', group: 'Google' },
  { value: 'pixel_8', label: 'Pixel 8', icon: 'ðŸ¤–', device: 'Chrome', group: 'Google' },
  { value: 'pixel_7_pro', label: 'Pixel 7 Pro', icon: 'ðŸ¤–', device: 'Chrome', group: 'Google' },
  { value: 'pixel_7a', label: 'Pixel 7a', icon: 'ðŸ¤–', device: 'Chrome', group: 'Google' },
  // Other Android
  { value: 'oneplus_12', label: 'OnePlus 12', icon: 'ðŸ¤–', device: 'Chrome', group: 'Other' },
  { value: 'xiaomi_14', label: 'Xiaomi 14', icon: 'ðŸ¤–', device: 'Chrome', group: 'Other' },
  { value: 'oppo_find_x7', label: 'OPPO Find X7', icon: 'ðŸ¤–', device: 'Chrome', group: 'Other' },
];

export const USER_AGENT_STRINGS = {
  // iPhone User Agents
  iphone_15_pro_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Mobile/15E148 Safari/604.1',
  iphone_15_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Mobile/15E148 Safari/604.1',
  iphone_14_pro_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1',
  iphone_14_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1',
  iphone_13_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1',
  iphone_12_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 16_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.5 Mobile/15E148 Safari/604.1',
  iphone_se_safari: 'Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1',
  iphone_chrome: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/120.0.6099.101 Mobile/15E148 Safari/604.1',
  // Samsung User Agents
  samsung_s24_ultra: 'Mozilla/5.0 (Linux; Android 14; SM-S928B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_s24: 'Mozilla/5.0 (Linux; Android 14; SM-S921B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_s23_ultra: 'Mozilla/5.0 (Linux; Android 14; SM-S918B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_s23: 'Mozilla/5.0 (Linux; Android 14; SM-S911B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_a54: 'Mozilla/5.0 (Linux; Android 14; SM-A546B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_zfold5: 'Mozilla/5.0 (Linux; Android 14; SM-F946B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  samsung_browser: 'Mozilla/5.0 (Linux; Android 14; SAMSUNG SM-S928B) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/24.0 Chrome/117.0.0.0 Mobile Safari/537.36',
  // Google Pixel User Agents
  pixel_8_pro: 'Mozilla/5.0 (Linux; Android 14; Pixel 8 Pro) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  pixel_8: 'Mozilla/5.0 (Linux; Android 14; Pixel 8) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  pixel_7_pro: 'Mozilla/5.0 (Linux; Android 14; Pixel 7 Pro) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  pixel_7a: 'Mozilla/5.0 (Linux; Android 14; Pixel 7a) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  // Other Android User Agents
  oneplus_12: 'Mozilla/5.0 (Linux; Android 14; CPH2573) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  xiaomi_14: 'Mozilla/5.0 (Linux; Android 14; 2311DRK48G) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
  oppo_find_x7: 'Mozilla/5.0 (Linux; Android 14; PHZ110) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36',
};

export default function UserAgentSelector({ value, onChange }) {
  const selected = userAgents.find(ua => ua.value === value) || userAgents[0];
  
  const groupedAgents = userAgents.reduce((acc, ua) => {
    if (!acc[ua.group]) acc[ua.group] = [];
    acc[ua.group].push(ua);
    return acc;
  }, {});

  return (
    <div className="space-y-2">
      <Label className="flex items-center gap-2 text-slate-700">
        <Smartphone className="h-4 w-4" />
        Mobile Device / User Agent
      </Label>
      <Select value={value || 'iphone_15_pro_safari'} onValueChange={onChange}>
        <SelectTrigger className="w-full">
          <SelectValue>
            <span className="flex items-center gap-2">
              <span>{selected.icon}</span>
              <span>{selected.label}</span>
              <span className="text-slate-400 text-xs">({selected.device})</span>
            </span>
          </SelectValue>
        </SelectTrigger>
        <SelectContent className="max-h-[300px]">
          {Object.entries(groupedAgents).map(([group, agents]) => (
            <div key={group}>
              <div className="px-2 py-1.5 text-xs font-semibold text-slate-500 bg-slate-50 sticky top-0">
                {group}
              </div>
              {agents.map((ua) => (
                <SelectItem key={ua.value} value={ua.value}>
                  <span className="flex items-center gap-2">
                    <span>{ua.icon}</span>
                    <span>{ua.label}</span>
                    <span className="text-slate-400 text-xs ml-1">({ua.device})</span>
                  </span>
                </SelectItem>
              ))}
            </div>
          ))}
        </SelectContent>
      </Select>
      <p className="text-xs text-slate-500">
        Searches will simulate this device's mobile browser
      </p>
    </div>
  );
}
